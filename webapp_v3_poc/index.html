<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Band Practice Pro v3 - Spotify Playback POC</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üé∏ Band Practice Pro v3</h1>
            <p class="subtitle">Spotify Playback POC - No 25-User Limit</p>
        </header>

        <div class="poc-section">
            <h2>Approach 1: Spotify Embed Player (Zero Auth)</h2>
            <div class="description">
                <p>‚úÖ <strong>No authentication required</strong></p>
                <p>‚úÖ No user limits</p>
                <p>‚úÖ Works for all Spotify users (Free & Premium)</p>
                <p>‚ö†Ô∏è Limited UI control</p>
                <p>‚ö†Ô∏è Only works for public tracks/playlists</p>
            </div>

            <div class="player-demo">
                <h3>Example: Single Track Embed</h3>
                <iframe
                    id="track-embed"
                    src="https://open.spotify.com/embed/track/3n3Ppam7vgaVa1iaRUc9Lp?utm_source=generator&theme=0"
                    width="100%"
                    height="152"
                    frameBorder="0"
                    allowfullscreen=""
                    allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
                    loading="lazy">
                </iframe>
                <p class="note">Try it: This is "Mr. Brightside" by The Killers - it just works!</p>
            </div>

            <div class="player-demo">
                <h3>Compact Player (80px height)</h3>
                <iframe
                    src="https://open.spotify.com/embed/track/3n3Ppam7vgaVa1iaRUc9Lp?utm_source=generator&theme=0"
                    width="100%"
                    height="80"
                    frameBorder="0"
                    allowfullscreen=""
                    allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
                    loading="lazy">
                </iframe>
                <p class="note">Minimal space - perfect for song player view</p>
            </div>

            <div class="player-demo">
                <h3>Dynamic Track Loading</h3>
                <div class="input-group">
                    <input
                        type="text"
                        id="track-id-input"
                        placeholder="Enter Spotify Track ID (e.g., 3n3Ppam7vgaVa1iaRUc9Lp)"
                        value="3n3Ppam7vgaVa1iaRUc9Lp">
                    <button onclick="loadTrack()">Load Track</button>
                </div>
                <div id="dynamic-player"></div>
                <p class="note">This demonstrates how you'd load songs from your Firestore database</p>
            </div>
        </div>

        <div class="poc-section">
            <h2>Approach 2: Web Playback SDK (User-Initiated Auth)</h2>
            <div class="description">
                <p>‚úÖ <strong>User authenticates directly with Spotify (not your app quota)</strong></p>
                <p>‚úÖ Full playback control via JavaScript</p>
                <p>‚úÖ Better UI integration</p>
                <p>‚ö†Ô∏è Requires Spotify Premium</p>
                <p>‚ö†Ô∏è More complex implementation</p>
                <p>‚ö†Ô∏è Still needs Spotify Developer app credentials (but different quota)</p>
            </div>

            <div class="player-demo">
                <h3>Web Playback SDK Demo</h3>
                <div class="sdk-status">
                    <p id="sdk-status">Status: Not initialized (needs Spotify Client ID)</p>
                </div>
                <div class="sdk-controls">
                    <button id="sdk-connect-btn" disabled>Connect to Spotify</button>
                    <button id="sdk-play-btn" disabled>Play</button>
                    <button id="sdk-pause-btn" disabled>Pause</button>
                </div>
                <div id="sdk-now-playing"></div>
                <p class="note">
                    <strong>Note:</strong> This requires your Spotify Client ID.
                    The key difference: users authenticate via popup (similar to "Login with Spotify"),
                    not pre-approved in your dashboard.
                </p>
            </div>
        </div>

        <div class="poc-section">
            <h2>Approach 3: Hybrid Strategy (Recommended)</h2>
            <div class="description">
                <p>‚úÖ <strong>Best of both worlds</strong></p>
                <ul>
                    <li>Default: Use Spotify Embed (works for everyone, no auth)</li>
                    <li>Optional: Users can "Connect Spotify Premium" for better controls</li>
                    <li>Fallback: "Open in Spotify App" button</li>
                </ul>
            </div>

            <div class="player-demo">
                <h3>Hybrid Player Mockup</h3>
                <div class="hybrid-player">
                    <div class="player-header">
                        <div class="song-info">
                            <img src="https://i.scdn.co/image/ab67616d00001e02ccdddd46119a4ff53eaf1f5d"
                                 alt="Album art" class="album-art">
                            <div>
                                <div class="song-title">Mr. Brightside</div>
                                <div class="song-artist">The Killers</div>
                            </div>
                        </div>
                        <div class="player-options">
                            <button class="btn-secondary" onclick="showUpgradeOption()">
                                üéß Connect Premium
                            </button>
                            <button class="btn-secondary" onclick="openInSpotify()">
                                ‚Üó Open in Spotify
                            </button>
                        </div>
                    </div>
                    <iframe
                        src="https://open.spotify.com/embed/track/3n3Ppam7vgaVa1iaRUc9Lp?utm_source=generator&theme=0"
                        width="100%"
                        height="80"
                        frameBorder="0"
                        allowfullscreen=""
                        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
                        loading="lazy">
                    </iframe>
                </div>
                <p class="note">
                    This is how it could work in BPPv3:
                    Embed player by default, optional Premium connection for power users
                </p>
            </div>
        </div>

        <div class="poc-section">
            <h2>Technical Implementation Notes</h2>
            <div class="tech-notes">
                <h3>How to Get Spotify Track IDs</h3>
                <pre><code>// When user pastes a Spotify playlist URL:
// https://open.spotify.com/playlist/37i9dQZF1DXcBWIGoYBM5M

// Use Spotify Web API (public endpoints, no user auth):
const response = await fetch(
  'https://api.spotify.com/v1/playlists/37i9dQZF1DXcBWIGoYBM5M/tracks',
  {
    headers: {
      'Authorization': 'Bearer YOUR_APP_ACCESS_TOKEN'
    }
  }
);

// This gets you track IDs to store in Firestore
// Then embed using: spotify:track:{TRACK_ID}</code></pre>

                <h3>BPPv3 Architecture Proposal</h3>
                <pre><code>Collections (Firestore)
  ‚îî‚îÄ‚îÄ Songs
       ‚îú‚îÄ‚îÄ spotify_track_id (e.g., "3n3Ppam7vgaVa1iaRUc9Lp")
       ‚îú‚îÄ‚îÄ spotify_playlist_uri (source playlist)
       ‚îú‚îÄ‚îÄ title (from Spotify API)
       ‚îú‚îÄ‚îÄ artist (from Spotify API)
       ‚îú‚îÄ‚îÄ album_art_url (from Spotify API)
       ‚îú‚îÄ‚îÄ lyrics (from Genius)
       ‚îî‚îÄ‚îÄ practice_notes (your custom data)

// Playback in BPPv3:
function playSong(song) {
  const embedUrl = `https://open.spotify.com/embed/track/${song.spotify_track_id}`;
  // Load into iframe - no auth needed!
}</code></pre>

                <h3>Authentication Flow</h3>
                <pre><code>1. User logs in with Google (Firebase Auth) ‚Üê only auth needed
2. User pastes Spotify playlist URL
3. Backend fetches playlist tracks via Spotify API
   (uses Client Credentials flow - your app token, not user token)
4. Store track IDs in Firestore
5. Frontend loads embeds - no user auth required!

Result: ‚úÖ No 25-user limit
        ‚úÖ No pre-approval needed
        ‚úÖ Works for all Spotify users</code></pre>
            </div>
        </div>

        <div class="poc-section">
            <h2>Comparison Table</h2>
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Feature</th>
                        <th>Current v2 (OAuth)</th>
                        <th>Embed Player</th>
                        <th>Web Playback SDK</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>User Limit</td>
                        <td>‚ùå 25 users</td>
                        <td>‚úÖ Unlimited</td>
                        <td>‚úÖ Unlimited*</td>
                    </tr>
                    <tr>
                        <td>User Auth Required</td>
                        <td>‚ùå Yes (pre-approved)</td>
                        <td>‚úÖ No</td>
                        <td>‚ö†Ô∏è Yes (popup)</td>
                    </tr>
                    <tr>
                        <td>Playback Control</td>
                        <td>‚úÖ Full</td>
                        <td>‚ö†Ô∏è Basic</td>
                        <td>‚úÖ Full</td>
                    </tr>
                    <tr>
                        <td>Works for Free Users</td>
                        <td>‚úÖ Yes</td>
                        <td>‚úÖ Yes</td>
                        <td>‚ùå Premium only</td>
                    </tr>
                    <tr>
                        <td>UI Integration</td>
                        <td>‚úÖ Seamless</td>
                        <td>‚ö†Ô∏è iframe</td>
                        <td>‚úÖ Seamless</td>
                    </tr>
                    <tr>
                        <td>Implementation</td>
                        <td>Complex</td>
                        <td>‚úÖ Simple</td>
                        <td>Complex</td>
                    </tr>
                </tbody>
            </table>
            <p class="note">*Web Playback SDK uses different quota - not subject to 25-user Extended Quota Mode limit</p>
        </div>

        <footer>
            <p>üé∏ Band Practice Pro v3 - Proof of Concept</p>
            <p>Open DevTools Console to see technical details</p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>
